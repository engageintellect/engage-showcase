import {
  unwriteEffect
} from "./chunk-6GKJPIUW.js";
import {
  typingInterval,
  writeEffect
} from "./chunk-6Y5ZXYWV.js";
import {
  animationSetup,
  runOnEveryParentUntil
} from "./chunk-B4EQOSTI.js";

// node_modules/.pnpm/svelte-typewriter@3.1.6_svelte@4.2.12/node_modules/svelte-typewriter/modes/loopOnce.js
var loopOnce = async (node, props) => {
  const { options, elements } = animationSetup(node, props);
  for (const element of elements) {
    const { currentNode, text } = element;
    await writeEffect(element, options);
    const textWithUnescapedAmpersands = text.replaceAll("&", "&amp;");
    const fullyWritten = currentNode.innerHTML === textWithUnescapedAmpersands;
    if (fullyWritten) {
      options.dispatch("done");
      await typingInterval(options.wordInterval);
      const isLastElement = elements.indexOf(element) === elements.length - 1;
      if (!isLastElement) {
        await unwriteEffect(currentNode, options);
        runOnEveryParentUntil(currentNode, options.parentElement, (element2) => {
          currentNode === element2 ? element2.classList.remove("typing") : element2.classList.remove("finished-typing");
        });
      }
      runOnEveryParentUntil(currentNode, options.parentElement, (element2) => {
        const cursorHasTimeout = typeof options.keepCursorOnFinish === "number";
        cursorHasTimeout && setTimeout(() => {
          element2.classList.replace("typing", "finished-typing");
        }, options.keepCursorOnFinish);
      });
    }
  }
};
var loopOnce_default = loopOnce;

export {
  loopOnce_default
};
//# sourceMappingURL=chunk-3BWRXTVK.js.map
